<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>GreenSphere ¬∑ ÊØèÊó•ÁªøËâ≤Ë°åÂä®ÊâìÂç°ÔΩúLeafPass & G-Points</title>
    <meta name="description" content="GreenSphere ÊòØ‰∏Ä‰∏™ÈÄöËøáÊØèÊó•Â∞è‰ªªÂä°„ÄÅÁßØÂàÜÂíåÊï∞Â≠óÂæΩÁ´†ÔºåÂ∏ÆÂä©‰Ω†ÂÖªÊàêÂèØÊåÅÁª≠ÁîüÊ¥ª‰π†ÊÉØÁöÑÂπ≥Âè∞„ÄÇ‰∏çÁÇíÂ∏Å„ÄÅ‰∏çÁêÜË¥¢ÔºåÂè™ËÆ∞ÂΩïÂíåÂ•ñÂä±ÁúüÂÆûÁöÑÁªøËâ≤Ë°åÂä®„ÄÇ">
    <meta name="keywords" content="GreenSphere, ÁªøËâ≤ÊâìÂç°, ‰ΩéÁ¢≥ÁîüÊ¥ª, ESG, ÂèØÊåÅÁª≠, ÁéØ‰øù, LeafPass, G-Points, ÁªøËâ≤ÁßØÂàÜ, Á¢≥ÂáèÊéí, ‰∏úÂçó‰∫ö, Green Impact">
    <meta name="author" content="GreenSphere">
    <meta name="robots" content="noindex,nofollow">
    <!-- ÁßªÂä®Á´Ø -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph / Social ÂàÜ‰∫´ -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="GreenSphere ¬∑ ÊØèÊó•ÁªøËâ≤Ë°åÂä®ÊâìÂç°">
    <meta property="og:description" content="Áî®Âá†ÂàÜÈíüÁöÑÂ∞èË°åÂä®ÔºåÁßØÁ¥ØÁúüÂÆûÁöÑÁªøËâ≤ÂΩ±ÂìçÂäõ„ÄÇLeafPass ÂæΩÁ´† & G-Points ÁßØÂàÜÔºåËÆ∞ÂΩï‰Ω†ÁöÑÊØè‰∏ÄÊ¨°ÁéØ‰øùÈÄâÊã©„ÄÇ">
    <meta property="og:url" content="https://greensphere.world">
    <meta property="og:site_name" content="GreenSphere">
    <meta property="og:image" content="https://greensphere.world/static/og-greensphere.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GreenSphere ¬∑ ÊØèÊó•ÁªøËâ≤Ë°åÂä®ÊâìÂç°">
    <meta name="twitter:description" content="Â∏ÆÂä©‰Ω†ÂÖªÊàê‰ΩéË¥üÊãÖ„ÄÅÂèØÊåÅÁª≠ÁöÑÁªøËâ≤ÁîüÊ¥ª‰π†ÊÉØ„ÄÇ">
    <meta name="twitter:image" content="https://greensphere.world/static/og-greensphere.png">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/style.css?v={{ asset_version }}">

</head>

<body>
    <div class="app-shell">
        <div class="topbar">
            <div class="logo-circle"></div>
            <div>
                <div class="app-title">GreenSphere</div>
                <div class="app-subtitle" data-i18n="top.subtitle">Small actions. Real impact.</div>

            </div>
        </div>

        <div class="card">
            <div class="section-title" data-i18n="section.user.title">Current user</div>
            <div id="user"></div>
        </div>

        <div class="card">
            <div class="section-title" data-i18n="section.progress.title">My progress</div>
            <div class="section-desc" data-i18n="section.progress.desc">Your green journey in GreenSphere.</div>
            <div id="stats"></div>
        </div>

        <div class="card">
            <div class="section-title" data-i18n="section.tasks.title">Today‚Äôs tasks</div>
            <div class="section-desc" data-i18n="section.tasks.desc">Tap what you‚Äôve done. We‚Äôll remember it with you.</div>
            <div id="tasks"></div>
        </div>

        <div class="card">
            <div class="section-title" data-i18n="section.badges.title">LeafPass badges</div>
            <div class="section-desc" data-i18n="section.badges.desc">Keep going and unlock your next badge.</div>
            <div id="badges"></div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script>
    let USER_ID = null;
    let TG_INIT_DATA = null;
    let LOCALE = "en";

    const I18N = {
        en: {
            "top.subtitle": "Small actions. Real impact.",
            "section.user.title": "Current user",
            "section.progress.title": "My progress",
            "section.progress.desc": "Your green journey in GreenSphere.",
            "section.tasks.title": "Today‚Äôs tasks",
            "section.tasks.desc": "Tap what you‚Äôve done. We‚Äôll remember it with you.",
            "section.badges.title": "LeafPass badges",
            "section.badges.desc": "Keep going and unlock your next badge.",
            "user.current": "Current user: {name}",
            "user.local": "Current user: {name} (local debug mode)",
            "stats.today": "Today: {done} / {total} actions completed",
            "stats.total": "Total: {points} points | Streak: {streak} days",
            "stats.allDone": "üéâ You‚Äôve completed all tasks today!",
            "badges.empty": "Complete tasks to unlock your LeafPass badges.",
            "task.meta": "Earn +{points} points",
            "task.completed": "‚úÖ Completed: {title}",
            "toast.completed": "Completed: {title}",
            "error.generic": "Something went wrong. Please try again."
        },
        zh: {
            "top.subtitle": "ÊØèÂ§©Âá†ÂàÜÈíüÔºåÊç¢‰∏ÄÁÇπÁúüÂÆûÁöÑÁªøËâ≤ÊîπÂèò",
            "section.user.title": "ÂΩìÂâçÁî®Êà∑",
            "section.progress.title": "ÊàëÁöÑÁªøËâ≤ËøõÂ∫¶",
            "section.progress.desc": "ËøôÊòØ‰Ω†Âú® GreenSphere ÈáåÔºåÂ∑≤ÁªèËµ∞ËøáÁöÑÁªøËâ≤Ë∂≥Ëøπ„ÄÇ",
            "section.tasks.title": "‰ªäÂ§©ÊÉ≥ÂÆåÊàêÂì™‰∫õÂ∞èË°åÂä®Ôºü",
            "section.tasks.desc": "ÂãæÈÄâ‰Ω†Â∑≤ÁªèÂÅöËøáÁöÑ‰∫ãÊÉÖÔºåÊàë‰ª¨Ë¥üË¥£Â∏Æ‰Ω†„ÄåËÆ∞‰Ωè„ÄçËøô‰∫õÂ•Ω‰π†ÊÉØ„ÄÇ",
            "section.badges.title": "Âè∂Â≠êÂæΩÁ´† ¬∑ LeafPass",
            "section.badges.desc": "ËøûÁª≠ÂùöÊåÅÂá†Â§©Ôºå‰Ω†ÁöÑÁ¨¨‰∏ÄÁâáÂ∞èÂè∂Â≠êÂ∞±‰ºöË¢´ÁÇπ‰∫Æ„ÄÇ",
            "user.current": "ÂΩìÂâçÁî®Êà∑Ôºö{name}",
            "user.local": "ÂΩìÂâçÁî®Êà∑Ôºö{name}ÔºàÊú¨Âú∞Ë∞ÉËØïÊ®°ÂºèÔºâ",
            "stats.today": "‰ªäÂ§©‰Ω†Â∑≤ÁªèÂÆåÊàê {done} / {total} ‰∏™ÁªøËâ≤Â∞èË°åÂä®",
            "stats.total": "Á¥ØËÆ°Ëé∑Âæó {points} ÂàÜ ÔΩú Â∑≤ËøûÁª≠ÂèÇ‰∏é {streak} Â§©",
            "stats.allDone": "üéâ ‰ªäÂ§©ÁöÑÁªøËâ≤‰ªªÂä°Â∑≤ÂÖ®ÈÉ®ÂÆåÊàêÔºÅ",
            "badges.empty": "ÂùöÊåÅÂÆåÊàê‰ªªÂä°Ôºå‰Ω†‰ºöÈÄêÊ≠•Ëß£ÈîÅÂ±û‰∫é‰Ω†ÁöÑ LeafPass ÂæΩÁ´†„ÄÇ",
            "task.meta": "ÂÆåÊàêÂèØËé∑Âæó +{points} ÂàÜ",
            "task.completed": "‚úÖ Â∑≤ÂÆåÊàêÔºö{title}",
            "toast.completed": "Â∑≤ÂÆåÊàêÔºö{title}",
            "error.generic": "ËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ"
        },
        th: {
            "top.subtitle": "‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏£‡∏¥‡∏á",
            "section.user.title": "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô",
            "section.progress.title": "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô",
            "section.progress.desc": "‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô GreenSphere",
            "section.tasks.title": "‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ",
            "section.tasks.desc": "‡πÅ‡∏ï‡∏∞‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏´‡πâ",
            "section.badges.title": "‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç LeafPass",
            "section.badges.desc": "‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",
            "user.current": "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: {name}",
            "user.local": "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: {name} (‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏î‡∏™‡∏≠‡∏ö)",
            "stats.today": "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à {done} / {total} ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à",
            "stats.total": "‡∏™‡∏∞‡∏™‡∏° {points} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô | ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á {streak} ‡∏ß‡∏±‡∏ô",
            "stats.allDone": "üéâ ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß!",
            "badges.empty": "‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç LeafPass ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
            "task.meta": "‡∏£‡∏±‡∏ö +{points} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô",
            "task.completed": "‚úÖ ‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß: {title}",
            "toast.completed": "‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß: {title}",
            "error.generic": "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"
        },
        vi: {
            "top.subtitle": "H√†nh ƒë·ªông nh·ªè. T√°c ƒë·ªông th·∫≠t.",
            "section.user.title": "Ng∆∞·ªùi d√πng",
            "section.progress.title": "Ti·∫øn ƒë·ªô c·ªßa t√¥i",
            "section.progress.desc": "H√†nh tr√¨nh xanh c·ªßa b·∫°n trong GreenSphere.",
            "section.tasks.title": "Nhi·ªám v·ª• h√¥m nay",
            "section.tasks.desc": "Ch·ªçn vi·ªác b·∫°n ƒë√£ l√†m. Ch√∫ng t√¥i s·∫Ω ghi nh·ªõ c√πng b·∫°n.",
            "section.badges.title": "Huy hi·ªáu LeafPass",
            "section.badges.desc": "Ti·∫øp t·ª•c ƒë·ªÉ m·ªü kh√≥a huy hi·ªáu ti·∫øp theo.",
            "user.current": "Ng∆∞·ªùi d√πng: {name}",
            "user.local": "Ng∆∞·ªùi d√πng: {name} (ch·∫ø ƒë·ªô th·ª≠ nghi·ªám)",
            "stats.today": "H√¥m nay: ƒë√£ ho√†n th√†nh {done} / {total}",
            "stats.total": "T·ªïng: {points} ƒëi·ªÉm | Chu·ªói: {streak} ng√†y",
            "stats.allDone": "üéâ B·∫°n ƒë√£ ho√†n th√†nh h·∫øt nhi·ªám v·ª• h√¥m nay!",
            "badges.empty": "Ho√†n th√†nh nhi·ªám v·ª• ƒë·ªÉ m·ªü kh√≥a huy hi·ªáu LeafPass.",
            "task.meta": "Nh·∫≠n +{points} ƒëi·ªÉm",
            "task.completed": "‚úÖ ƒê√£ l√†m: {title}",
            "toast.completed": "ƒê√£ l√†m: {title}",
            "error.generic": "C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i."
        },
        km: {
            "top.subtitle": "·ûü·ûÄ·ûò·üí·ûò·ûó·û∂·ûñ·ûè·ûº·ûÖ·üó ¬∑ ·û•·ûë·üí·ûí·û∑·ûñ·ûõ·ûñ·û∑·ûè·ûî·üí·ûö·û∂·ûÄ·ûä",
            "section.user.title": "·û¢·üí·ûì·ûÄ·ûî·üí·ûö·ûæ·ûî·üí·ûö·û∂·ûü·üã",
            "section.progress.title": "·ûú·ûå·üí·ûç·ûì·ûó·û∂·ûñ·ûö·ûî·ûü·üã·ûÅ·üí·ûâ·ûª·üÜ",
            "section.progress.desc": "·ûä·üÜ·ûé·ûæ·ûö·ûî·üÉ·ûè·ûÑ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ·ûÄ·üí·ûì·ûª·ûÑ GreenSphere",
            "section.tasks.title": "·ûó·û∂·ûö·ûÄ·û∑·ûÖ·üí·ûÖ·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá",
            "section.tasks.desc": "·ûá·üí·ûö·ûæ·ûü·û¢·üí·ûú·û∏·ûä·üÇ·ûõ·û¢·üí·ûì·ûÄ·ûî·û∂·ûì·ûí·üí·ûú·ûæ ·û†·ûæ·ûô·ûô·ûæ·ûÑ·ûì·ûπ·ûÑ·ûÄ·ûè·üã·ûè·üí·ûö·û∂",
            "section.badges.title": "ÂæΩÁ´† LeafPass",
            "section.badges.desc": "·ûî·ûì·üí·ûè·ûí·üí·ûú·ûæ ·ûä·ûæ·ûò·üí·ûî·û∏·ûä·üÑ·üá·ûü·üÑÂæΩÁ´† ·ûî·ûì·üí·ûë·û∂·ûî·üã",
            "user.current": "·û¢·üí·ûì·ûÄ·ûî·üí·ûö·ûæ·ûî·üí·ûö·û∂·ûü·üã·üñ {name}",
            "user.local": "·û¢·üí·ûì·ûÄ·ûî·üí·ûö·ûæ·ûî·üí·ûö·û∂·ûü·üã·üñ {name} (local debug mode)",
            "stats.today": "·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá·üñ ·ûî·û∂·ûì·ûî·ûâ·üí·ûÖ·ûî·üã {done} / {total}",
            "stats.total": "·ûü·ûö·ûª·ûî·üñ {points} ·ûñ·û∑·ûì·üí·ûë·ûª | streak·üñ {streak} ·ûê·üí·ûÑ·üÉ",
            "stats.allDone": "üéâ ·û¢·üí·ûì·ûÄ·ûî·û∂·ûì·ûî·ûâ·üí·ûÖ·ûî·üã·ûó·û∂·ûö·ûÄ·û∑·ûÖ·üí·ûÖ·ûê·üí·ûÑ·üÉ·ûì·üÅ·üá·ûë·û∂·üÜ·ûÑ·û¢·ûü·üã!",
            "badges.empty": "·ûî·üÜ·ûñ·üÅ·ûâ·ûó·û∂·ûö·ûÄ·û∑·ûÖ·üí·ûÖ ·ûä·ûæ·ûò·üí·ûî·û∏·ûä·üÑ·üá·ûü·üÑÂæΩÁ´† LeafPass ·ûö·ûî·ûü·üã·û¢·üí·ûì·ûÄ",
            "task.meta": "·ûë·ûë·ûΩ·ûõ +{points} ·ûñ·û∑·ûì·üí·ûë·ûª",
            "task.completed": "‚úÖ ·ûî·û∂·ûì·ûí·üí·ûú·ûæ·üñ {title}",
            "toast.completed": "·ûî·û∂·ûì·ûí·üí·ûú·ûæ·üñ {title}",
            "error.generic": "·ûò·û∂·ûì·ûî·ûâ·üí·û†·û∂ ·ûü·ûº·ûò·ûñ·üí·ûô·û∂·ûô·û∂·ûò·ûò·üí·ûè·ûÑ·ûë·üÄ·ûè"
        }
    };

    function normalizeLang(code) {
        const v = (code || '').toLowerCase();
        if (v.startsWith('zh')) return 'zh';
        if (v.startsWith('th')) return 'th';
        if (v.startsWith('vi')) return 'vi';
        if (v.startsWith('km') || v.startsWith('kh')) return 'km';
        return 'en';
    }

    function tr(key, params) {
        const dict = I18N[LOCALE] || I18N.en;
        let s = (dict && dict[key]) || I18N.en[key] || '';
        if (!s) return '';
        if (params) {
            Object.keys(params).forEach(k => {
                s = s.replaceAll('{' + k + '}', String(params[k]));
            });
        }
        return s;
    }

    function applyTranslations() {
        const dict = I18N[LOCALE] || I18N.en;
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const value = (dict && dict[key]) || I18N.en[key];
            if (value) el.textContent = value;
        });
        document.documentElement.lang = LOCALE === 'zh' ? 'zh-CN' : LOCALE;
    }

    function showToast(text) {
        const t = document.getElementById('toast');
        t.innerText = text;
        t.classList.add('show');
        setTimeout(() => {
            t.classList.remove('show');
        }, 1800);
    }

    async function initUser() {
        const tg = window.Telegram && window.Telegram.WebApp;
        let telegramId = null;
        let username = null;

        if (tg && tg.initDataUnsafe && tg.initDataUnsafe.user) {
            TG_INIT_DATA = tg.initData || null;
            LOCALE = normalizeLang(tg.initDataUnsafe.user.language_code || navigator.language);
            applyTranslations();
            const u = tg.initDataUnsafe.user;
            telegramId = u.id;
            username = u.username || (u.first_name || '') + ' ' + (u.last_name || '');
            document.getElementById('user').innerText = tr('user.current', {
                name: (username || ('TG User ' + telegramId))
            });
        } else {
            LOCALE = normalizeLang(navigator.language);
            applyTranslations();
            telegramId = 1;
            username = 'Local Demo User';
            document.getElementById('user').innerText = tr('user.local', {name: username});
        }

        const res = await fetch('/api/init_user', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-GS-Lang': LOCALE,
                ...(TG_INIT_DATA ? {'X-Telegram-Init-Data': TG_INIT_DATA} : {})
            },
            body: JSON.stringify({
                telegram_id: telegramId,
                username: username
            })
        });
        const data = await res.json();
        USER_ID = data.user_id;
    }

    async function loadData() {
        if (!USER_ID) {
            await initUser();
        }

        const res = await fetch('/api/tasks?user_id=' + USER_ID, {
            headers: {
                'X-GS-Lang': LOCALE,
                ...(TG_INIT_DATA ? {'X-Telegram-Init-Data': TG_INIT_DATA} : {})
            }
        });
        const data = await res.json();
        const stats = data.stats;

        const statsDiv = document.getElementById('stats');
        let html = '';
        html += '<div class="progress-kpi">' + tr('stats.total', {points: stats.total_points, streak: stats.streak}) + '</div>';
        html += '<div class="progress-sub">' + tr('stats.today', {done: stats.today_completed, total: stats.total_tasks}) + '</div>';
        if (stats.total_tasks > 0 && stats.today_completed === stats.total_tasks) {
            html += '<div class="all-done">' + tr('stats.allDone') + '</div>';
        }
        statsDiv.innerHTML = html;

        const badgesDiv = document.getElementById('badges');
        const badges = data.badges || [];
        if (badges.length === 0) {
            badgesDiv.innerHTML = '<div class="empty-muted">' + tr('badges.empty') + '</div>';
        } else {
            const items = badges
                .slice(0, 12)
                .map(b => `<span title="${(b.description || '').replace(/"/g, '&quot;')}">${b.title}</span>`)
                .join('');
            badgesDiv.innerHTML = `<div class="badges-list">${items}</div>`;
        }

        const tasksDiv = document.getElementById('tasks');
        tasksDiv.innerHTML = '';
        data.tasks.forEach(t => {
            const btn = document.createElement('button');
            btn.classList.add('task-button');
            const titleSpan = document.createElement('span');
            titleSpan.classList.add('title');
            const metaSpan = document.createElement('span');
            metaSpan.classList.add('meta');
            metaSpan.innerText = tr('task.meta', {points: t.points});

            if (t.completed_today) {
                btn.classList.add('completed');
                titleSpan.innerText = tr('task.completed', {title: t.title});
                btn.disabled = true;
            } else {
                titleSpan.innerText = t.title;
                btn.onclick = async () => {
                    await fetch('/api/complete', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-GS-Lang': LOCALE,
                            ...(TG_INIT_DATA ? {'X-Telegram-Init-Data': TG_INIT_DATA} : {})
                        },
                        body: JSON.stringify({user_id: USER_ID, task_id: t.id})
                    });
                    showToast(tr('toast.completed', {title: t.title}));
                    await loadData();
                };
            }

            btn.appendChild(titleSpan);
            btn.appendChild(metaSpan);
            tasksDiv.appendChild(btn);
        });
    }

    (async () => {
        await initUser();
        await loadData();
    })();
    </script>
</body>
</html>

<!--
  GreenSphere Telegram WebApp
  ÁªìÊûÑÔºö
    - app-shell/topbarÔºöÂìÅÁâåÂå∫
    - card(ÂΩìÂâçÁî®Êà∑ / ËøõÂ∫¶ / ‰ªäÊó•‰ªªÂä° / ÊàëÁöÑÂæΩÁ´†)
  Ê†∑ÂºèÂÖ•Âè£Ôºö/static/style.css
-->

