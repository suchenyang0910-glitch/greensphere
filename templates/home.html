{% extends "site_base.html" %}

{% block content %}
<div class="landing-body">

  <header class="landing-header">
    <img src="/static/logo.svg" class="logo" alt="GreenSphere logo" />
    <span class="brand">GreenSphereâ„¢</span>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h1>
      {{ t.title }}
    </h1>
    <p>
      {{ t.subtitle }}
    </p>

    <div class="hero-cta">
      <a class="btn" href="https://t.me/GreenSphereCommunity_Bot" target="_blank">
        {{ t.cta_use_bot }}
      </a>
      <p class="hero-meta">
        Telegram Bot: <code>@GreenSphereCommunity_Bot</code><br/>
        WebApp: <a href="https://app.greensphere.world/app" target="_blank">app.greensphere.world/app</a>
      </p>
    </div>
  </section>

  <!-- æ ¸å¿ƒç‰¹æ€§ -->
  <section class="features">
    <div class="feature">
      ğŸŒ± è¡Œä¸ºå³ç§¯åˆ†
      <span>æ­¥è¡Œ / å‡ç¢³ / æ¯æ—¥ä»»åŠ¡ â†’ G-Points</span>
    </div>
    <div class="feature">
      ğŸŸ LeafPass ç­‰çº§
      <span>L1â€“L4 ç»¿è‰²è¡Œä¸ºèº«ä»½æˆé•¿</span>
    </div>
    <div class="feature">
      ğŸ”— Telegram åŸç”Ÿ
      <span>æ— éœ€ä¸‹è½½ Appï¼Œä¸€é”®æ‰“å¼€ WebApp</span>
    </div>
  </section>

  <!-- LeafPass ç­‰çº§è¯´æ˜ -->
  <section class="leafpass" id="leafpass">
    <h2>LeafPassâ„¢ Â· ç»¿è‰²è¡Œä¸ºèº«ä»½ç­‰çº§</h2>
    <p class="section-sub">
      LeafPass ä¸æ˜¯æŠ•æœº NFTï¼Œè€Œæ˜¯åŸºäºçœŸå®è¡Œä¸ºçš„é•¿æœŸç»¿è‰²èº«ä»½ã€‚
    </p>

    <div class="leafpass-grid">

      <div class="leaf-card l1">
        <h3>L1 Â· Seed</h3>
        <p class="range">0 â€“ 99 G-Points</p>
        <ul>
          <li>å®Œæˆé¦–æ¬¡ç»¿è‰²ä»»åŠ¡</li>
          <li>è¿›å…¥ç¤¾åŒºåŸºç¡€é¢‘é“</li>
          <li>å‚ä¸æ—©æœŸæµ‹è¯•</li>
        </ul>
      </div>

      <div class="leaf-card l2">
        <h3>L2 Â· Sprout</h3>
        <p class="range">100 â€“ 499 G-Points</p>
        <ul>
          <li>è§£é”å‘¨æœŸæ€§ä»»åŠ¡</li>
          <li>è·å¾—åˆä½œå“ç‰Œå¥–åŠ±</li>
          <li>å‚ä¸ç¤¾åŒºæŠ•ç¥¨</li>
        </ul>
      </div>

      <div class="leaf-card l3">
        <h3>L3 Â· Grove</h3>
        <p class="range">500 â€“ 1999 G-Points</p>
        <ul>
          <li>é«˜çº§ä»»åŠ¡ä¸æŒ‘æˆ˜</li>
          <li>çº¿ä¸‹æ´»åŠ¨ä¼˜å…ˆæƒ</li>
          <li>ç¤¾åŒºæ²»ç†ææ¡ˆæƒ</li>
        </ul>
      </div>

      <div class="leaf-card l4">
        <h3>L4 Â· Canopy</h3>
        <p class="range">2000+ G-Points</p>
        <ul>
          <li>ç”Ÿæ€å…±å»ºè€…èº«ä»½</li>
          <li>å“ç‰Œä¸é¡¹ç›®å…±åˆ›</li>
          <li>é•¿æœŸæƒç›Šä¸åˆ†æ¶¦è®¡åˆ’ï¼ˆæœªæ¥ï¼‰</li>
        </ul>
      </div>

    </div>
  </section>

  <!-- Waitlist ï¼ˆä¿æŒç»“æ„ï¼Œåç«¯ API ä»¥åå†æ¥ï¼‰ -->
  <section class="waitlist">
    <h2>åŠ å…¥ Pioneer Waitlist</h2>

    <form id="waitlistForm">
      <input type="email" name="email" placeholder="Email" required />
      <input type="text" name="telegram_id" placeholder="Telegram IDï¼ˆæ•°å­—ï¼‰" required />
      <input type="text" name="invite_code" placeholder="é‚€è¯·ç ï¼ˆå¯é€‰ï¼‰" />
      <button type="submit">Join Waitlist</button>
    </form>

    <p id="msg"></p>
  </section>

  <footer class="landing-footer">
    Â© GreenSphereâ„¢ Â· East Asia Green Impact Network
  </footer>
</div>

<script>
document.getElementById("waitlistForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;
  const data = {
    email: form.email.value,
    telegram_id: Number(form.telegram_id.value),
    invite_code: form.invite_code.value || null
  };

  // TODO: ä½ å¯ä»¥åœ¨ app/api é‡Œæš´éœ²ä¸€ä¸ª /api/waitlist æ¥å£åï¼Œå†æŠŠè¿™é‡Œçš„ URL æ”¹ä¸ºä½ çš„åç«¯ API
  const res = await fetch("/api/waitlist", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify(data)
  });

  const json = await res.json();

  if (json.success) {
    document.getElementById("msg").innerText = "å·²åŠ å…¥ Waitlistï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ Telegram / Email ä¸ä½ è”ç³»ã€‚";
  } else {
    document.getElementById("msg").innerText = json.message || "Error";
  }
});
</script>
{% endblock %}
